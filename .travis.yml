language: node_js
cache:
  yarn: true
  directories:
    - node_modules
node_js:
  - 'node'
  - '6'
after_success:
  - "$(npm bin)/coveralls < ./coverage/lcov.info"
  - "$(npm bin)/codeclimate-test-reporter < ./coverage/lcov.info"
before_deploy:
  - "[ -n \"${TRAVIS_TAG}\" ] && git archive --format tar.gz --prefix=simple-process-${TRAVIS_TAG}/ -o ${HOME}/simple-process-${TRAVIS_TAG}.tar.gz ${TRAVIS_TAG}"
deploy:
  - provider: npm
    skip_cleanup: true
    email: "hiroaki@hysoftware.net"
    api_key:
      secure: >-
        Ns5FahYZQnUzi6dJasMhFDuDs8uex7d+oba21yct11Qj11sG/PSawdgSGUDw318pNMTyYe
        yEikk4Y4+q6r5Wkdxot4h6c1SeE+AB6nViA5Jwozyy6dxofA7X/1jUTO1m9HIudTcu2Gh9
        H+DsDfwxGOX29GBdVV3iH52vWN8KcD9lKhg5yGumKjzMr6c9HsCJqcE0nVFvNg/RSih3vt
        BXgR56V1jXKHc09UhCR2ha9ahfSoOzBFHg0CitUXTc2t2f9ozCCtzqAkQ7hshLmHRWR/Lt
        YwYvXNly24DcQg19HR8DpX9WxS973de40xvZeNZARQKqb9SMIcejFJWgPuwpDAWMd8LwAN
        DNSWCGKjZneLv2N4EKtbhiV6/meH2Hor90aZ5uxqNVc0mylMj3vn3du1dcqrbTFHATG6/L
        bqeFA9G5iijldLwqZc8Uw/Q6a3V/CNk2SK12mQ/RWjxIQgI3w9Xn3+T2Kd5inW7+PnCxj6
        NdCcPRJipqLaCuM4IIcFfqr1J0dIbPWKDrYPZW/1i7KrwKPGC78VY/JQmb8/cQS7j/AtAL
        47dIPdtF1F6gXBnE62IkJclyBX4c16bHxDOYF81Z3zi/ahT4MQP/iRx4gZqZDxf+IzQ89P
        hVQZou4aVrEkeEefnjrdYt/ZWUy+DZ1JbBEnmnj0yX+N37UUCt4Qg=
    on:
      tags: true
  - provider: releases
    file: ${HOME}/simple-process-${TRAVIS_TAG}.tar.gz
    skip_cleanup: true
    overwrite: true
    api_key:
      secure: >-
        tEr10/n5teIihmq35MjBZpEqmEvniFm2C4Ua7kctXdpocwF9L35emrMTRaAhaNTB/S4Zyz
        +ZSuBasDaYCjzdWxTrtsDj4ZlTfwKUrR46G9bVLX30nwVEHSYxtnFYWm2CEr3bvyOrEJNd
        SHiy16aCrzSr0Miko5wOjR61aaTebQ1TUp6UWd+E8Nhcl1W290liieL734YE2KV5t4Xybm
        /auYlXIidOlucV2GOtS0jP+Bj98V8j+FQMMZB8YbNJoa5R/6Pk1ZH2D6CBs96OACoZDPCj
        ZKdyv/BdoINZ7l9Vfw+RL7F24GqlCuRmZ4iZyEVf8/+6wcumQjrzJvZrV/tLFLiK+Ku9IH
        lKpVerPegF9AwzY0zyoZJe4y0wL/AdiqoOaYSe7nBfnXvNJFAZAO6+wgUr0JDsYKGWzH3k
        5Ko3JFbNagJEtURwTw2dayoOEDh7wTzSjmA5c446ikzVwB1OLWUNtU92QceQxoN1pfEN1b
        BKtQxliCXiMPjEST00dY0/FH3UWt3e/G5JieAYAkQecIU9zPsRxPfdMS0cpBoRNJQXd4Em
        nm5Fy2I1+HdooCgZvlx/i9xO+dHienpCSEztDw7i8JnPTSH0612nTMXwVbzn15U+u/3lrx
        osISG5GqpqzMzENYr3+MOD+rWGYRzFXPGOhy8kBYVllRnHwkSFWBo=
    on:
      tags: true
