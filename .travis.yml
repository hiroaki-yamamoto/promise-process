language: node_js
cache:
  yarn: true
  directories:
    - node_modules
node_js:
  - 'node'
  - '6'
after_success:
  - "$(npm bin)/coveralls < ./coverage/lcov.info"
  - "$(npm bin)/codeclimate-test-reporter < ./coverage/lcov.info"
before_deploy:
  - "[ -n \"${TRAVIS_TAG}\" ] && npm version --no-git-tag-version --allow-same-version ${TRAVIS_TAG}"
  - "[ -n \"${TRAVIS_TAG}\" ] && git archive --format tar.gz --prefix=simple-process-${TRAVIS_TAG}/ -o ${HOME}/simple-process-${TRAVIS_TAG}.tar.gz ${TRAVIS_TAG}"
deploy:
  - provider: npm
    skip_cleanup: true
    email: "hiroaki@hysoftware.net"
    api_key:
      secure: >-
        pWQp/nVl+ZWAWHu7ElTaA6x83bzPUzELhP+TtU0ydpTnhQ7yprjhA+H8uDl/jITe+6Do5Qw
        ErhvuVhIIzO/tUGhCYp/yNb3pDqtEIkoj7o5rKLMueTm3Xe++D8/NKnUOI0S++2idjOKA+G
        RFCqTb25d2yW73oEJRwlsmWbIQJ5BQF4BM4wu8wvJpLEmpe9MP7k41qhM/lX1MEmyoEwPxb
        e3h8aFTts4l9E1EoTvnUZkyVkcens5xVlCczmc66jOAyMfPQoqTNAWHDWTI76jcItvE+6yZ
        /7tw/R2/X+AlIwv+dCE1yg7IRpVTvqbe1GjdhDTpwRULfKAXKs6U9q7JTTfxHtaa9Q/STHA
        3VmKGvsdaNDv/zMHUCttlUwGbYbRNhqMgDjzMg3lnRZOIjjAArHdXIrP4NJl4+4s5Qd+oh/
        ZuPucxQgs5lzLHVut65FhGgpsqhnmOLpxkBHpyBf3hzxU87u8va2WD7vMmu5D78LNQiGryD
        T69gQode4tVLKBpj/4/tRlvJrwxJHRYcDg4qjnp1UV00pTeqaL2ns33HBmgMN+B23vBGlYh
        dzs+IngsqnARxcVC4YNhhLJ6Yhu5q4w3tqHpct0P2PrLz5w8YcKeU9de8xfhrcQinurWGzc
        Q41DA+5mWeX1FNYgm00oGNI8yWh8McbrUEZJQ7x8tceA=
    on:
      tags: true
      node: node
  - provider: releases
    file: ${HOME}/simple-process-${TRAVIS_TAG}.tar.gz
    skip_cleanup: true
    overwrite: true
    api_key:
      secure: >-
        tEr10/n5teIihmq35MjBZpEqmEvniFm2C4Ua7kctXdpocwF9L35emrMTRaAhaNTB/S4Zyz
        +ZSuBasDaYCjzdWxTrtsDj4ZlTfwKUrR46G9bVLX30nwVEHSYxtnFYWm2CEr3bvyOrEJNd
        SHiy16aCrzSr0Miko5wOjR61aaTebQ1TUp6UWd+E8Nhcl1W290liieL734YE2KV5t4Xybm
        /auYlXIidOlucV2GOtS0jP+Bj98V8j+FQMMZB8YbNJoa5R/6Pk1ZH2D6CBs96OACoZDPCj
        ZKdyv/BdoINZ7l9Vfw+RL7F24GqlCuRmZ4iZyEVf8/+6wcumQjrzJvZrV/tLFLiK+Ku9IH
        lKpVerPegF9AwzY0zyoZJe4y0wL/AdiqoOaYSe7nBfnXvNJFAZAO6+wgUr0JDsYKGWzH3k
        5Ko3JFbNagJEtURwTw2dayoOEDh7wTzSjmA5c446ikzVwB1OLWUNtU92QceQxoN1pfEN1b
        BKtQxliCXiMPjEST00dY0/FH3UWt3e/G5JieAYAkQecIU9zPsRxPfdMS0cpBoRNJQXd4Em
        nm5Fy2I1+HdooCgZvlx/i9xO+dHienpCSEztDw7i8JnPTSH0612nTMXwVbzn15U+u/3lrx
        osISG5GqpqzMzENYr3+MOD+rWGYRzFXPGOhy8kBYVllRnHwkSFWBo=
    on:
      tags: true
      node: node
